<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <title>ROS 2 Architecture Diagram</title>
  <desc>Diagram showing the main components of ROS 2 architecture</desc>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#ffffff"/>

  <!-- DDS Middleware -->
  <rect x="50" y="50" width="700" height="500" fill="none" stroke="#333" stroke-width="2" rx="10" ry="10"/>
  <text x="400" y="70" font-family="Arial" font-size="16" text-anchor="middle" fill="#333">DDS Middleware</text>

  <!-- Nodes -->
  <circle cx="200" cy="200" r="40" fill="#4CAF50" stroke="#2E7D32" stroke-width="2"/>
  <text x="200" y="205" font-family="Arial" font-size="14" text-anchor="middle" fill="white">Node A</text>

  <circle cx="600" cy="200" r="40" fill="#2196F3" stroke="#0D47A1" stroke-width="2"/>
  <text x="600" y="205" font-family="Arial" font-size="14" text-anchor="middle" fill="white">Node B</text>

  <circle cx="400" cy="400" r="40" fill="#FF9800" stroke="#E65100" stroke-width="2"/>
  <text x="400" y="405" font-family="Arial" font-size="14" text-anchor="middle" fill="white">Node C</text>

  <!-- Topics -->
  <rect x="320" y="150" width="160" height="30" fill="#F44336" stroke="#B71C1C" stroke-width="1" rx="5" ry="5"/>
  <text x="400" y="170" font-family="Arial" font-size="12" text-anchor="middle" fill="white">/topic_name</text>

  <rect x="480" y="300" width="160" height="30" fill="#F44336" stroke="#B71C1C" stroke-width="1" rx="5" ry="5"/>
  <text x="560" y="320" font-family="Arial" font-size="12" text-anchor="middle" fill="white">/cmd_vel</text>

  <rect x="160" y="300" width="160" height="30" fill="#F44336" stroke="#B71C1C" stroke-width="1" rx="5" ry="5"/>
  <text x="240" y="320" font-family="Arial" font-size="12" text-anchor="middle" fill="white">/sensor_data</text>

  <!-- Arrows showing communication -->
  <!-- Node A to Topic -->
  <line x1="240" y1="200" x2="320" y2="165" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Topic to Node B -->
  <line x1="480" y1="165" x2="560" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Node B to Cmd Vel -->
  <line x1="560" y1="240" x2="560" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Cmd Vel to Node C -->
  <line x1="560" y1="330" x2="440" y2="370" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Node C to Sensor Data -->
  <line x1="360" y1="370" x2="320" y2="315" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Sensor Data to Node A -->
  <line x1="320" y1="315" x2="240" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Arrowhead definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
      refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="620" y="450" width="150" height="120" fill="none" stroke="#333" stroke-width="1"/>
  <text x="695" y="470" font-family="Arial" font-size="14" text-anchor="middle" fill="#333">Legend</text>

  <circle cx="640" cy="490" r="10" fill="#4CAF50" stroke="#2E7D32" stroke-width="1"/>
  <text x="655" y="495" font-family="Arial" font-size="12" fill="#333">Node</text>

  <rect x="635" y="510" width="20" height="10" fill="#F44336" stroke="#B71C1C" stroke-width="1" rx="2" ry="2"/>
  <text x="660" y="520" font-family="Arial" font-size="12" fill="#333">Topic</text>

  <line x1="635" y1="535" x2="655" y2="535" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="660" y="540" font-family="Arial" font-size="12" fill="#333">Message</text>

  <!-- Title -->
  <text x="400" y="30" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold" fill="#333">
    ROS 2 Architecture: Nodes Communicating via Topics
  </text>
</svg>